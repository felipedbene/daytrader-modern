<!--
 * (C) Copyright IBM Corporation 2015.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html  xmlns="http://www.w3.org/1999/xhtml"
       xmlns:h="http://xmlns.jcp.org/jsf/html"
       xmlns:f="http://xmlns.jcp.org/jsf/core"
       xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
       xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions">
<h:head>
	<title>DayTrader Account</title>
	<link rel="stylesheet" href="style.css" type="text/css" />
	<link rel="shortcut icon" href="./favicon.ico" />
</h:head>
<h:body>

	<h:form id="updateProfile">
		<nav class="dt-nav">
			<a href="tradehome.faces" class="dt-brand">
				<span class="dt-brand-icon">DT</span>
				DayTrader
			</a>
			<ul class="dt-nav-links">
				<li><h:outputLink value="tradehome.faces">Home</h:outputLink></li>
				<li><h:outputLink value="account.faces" styleClass="active">Account</h:outputLink></li>
				<li><h:outputLink value="marketSummary.faces">Market</h:outputLink></li>
				<li><h:outputLink value="portfolio.faces">Portfolio</h:outputLink></li>
				<li><h:outputLink value="quote.faces">Quotes/Trade</h:outputLink></li>
				<li><h:commandLink action="#{tradeapp.logout}" id="logoff">Logout</h:commandLink></li>
			</ul>
		</nav>

		<main class="dt-main">
			<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:0.5rem;">
				<h:outputText value="#{accountdata.currentTime}" styleClass="text-muted" style="font-size:0.8125rem" />
			</div>

			<h:panelGroup rendered="#{tradeapp.results != null and tradeapp.results != ''}">
				<div class="dt-alert dt-alert-info"><h:outputText value="#{tradeapp.results}" /></div>
			</h:panelGroup>

			<h:panelGroup rendered="#{fn:length(accountdata.closedOrders) > 0}">
				<div class="dt-alert dt-alert-warning">
					<strong>Alert:</strong> The following order(s) have completed.
					<h:dataTable id="orders" value="#{accountdata.closedOrders}" var="item" styleClass="table" headerClass="tableHeader"
						rowClasses="tableOddRow,tableEvenRow"
						columnClasses="tableColumn,tableColumn,tableColumn,tableColumn,tableColumn,tableColumn,tableColumn,tableColumn"
						style="margin-top:0.5rem;">

						<h:column>
							<f:facet name="header"><h:outputText value="Order ID" /></f:facet>
							<h:outputText value="#{item.orderID}" />
						</h:column>
						<h:column>
							<f:facet name="header"><h:outputText value="Status" /></f:facet>
							<h:outputText value="#{item.orderStatus}" />
						</h:column>
						<h:column>
							<f:facet name="header"><h:outputText value="Opened" /></f:facet>
							<h:outputText value="#{item.openDate}" />
						</h:column>
						<h:column>
							<f:facet name="header"><h:outputText value="Completed" /></f:facet>
							<h:outputText value="#{item.completionDate}" />
						</h:column>
						<h:column>
							<f:facet name="header"><h:outputText value="Fee" /></f:facet>
							<h:outputText value="#{item.orderFee}" />
						</h:column>
						<h:column>
							<f:facet name="header"><h:outputText value="Type" /></f:facet>
							<h:outputText value="#{item.orderType}" />
						</h:column>
						<h:column>
							<f:facet name="header"><h:outputText value="Symbol" /></f:facet>
							<h:outputText value="#{item.symbol}" />
						</h:column>
						<h:column>
							<f:facet name="header"><h:outputText value="Quantity" /></f:facet>
							<h:outputText value="#{item.quantity}" />
						</h:column>
					</h:dataTable>
				</div>
			</h:panelGroup>

			<div class="dt-card">
				<div class="dt-card-header">
					<h3>Account Information</h3>
				</div>
				<div class="dt-stats-grid">
					<div class="dt-stat">
						<div class="dt-stat-label">Account Created</div>
						<div class="dt-stat-value" style="font-size:0.875rem;"><h:outputText value="#{accountdata.creationDate}" /></div>
					</div>
					<div class="dt-stat">
						<div class="dt-stat-label">Last Login</div>
						<div class="dt-stat-value" style="font-size:0.875rem;"><h:outputText value="#{accountdata.lastLogin}" /></div>
					</div>
					<div class="dt-stat">
						<div class="dt-stat-label">Account ID</div>
						<div class="dt-stat-value" style="font-size:1rem;"><h:outputText value="#{accountdata.accountID}" /></div>
					</div>
					<div class="dt-stat">
						<div class="dt-stat-label">Total Logins</div>
						<div class="dt-stat-value" style="font-size:1rem;"><h:outputText value="#{accountdata.loginCount}" /></div>
					</div>
					<div class="dt-stat">
						<div class="dt-stat-label">User ID</div>
						<div class="dt-stat-value" style="font-size:1rem;"><h:outputText value="#{accountdata.profileID}" /></div>
					</div>
					<div class="dt-stat">
						<div class="dt-stat-label">Total Logouts</div>
						<div class="dt-stat-value" style="font-size:1rem;"><h:outputText value="#{accountdata.logoutCount}" /></div>
					</div>
					<div class="dt-stat">
						<div class="dt-stat-label">Cash Balance</div>
						<div class="dt-stat-value" style="font-size:1rem;">$<h:outputText value="#{accountdata.balance}" /></div>
					</div>
					<div class="dt-stat">
						<div class="dt-stat-label">Opening Balance</div>
						<div class="dt-stat-value" style="font-size:1rem;">$<h:outputText value="#{accountdata.openBalance}" /></div>
					</div>
				</div>
			</div>

			<div class="dt-card">
				<div class="dt-card-header">
					<h3>Orders <span class="dt-badge dt-badge-blue">${accountdata.numberOfOrders} total</span></h3>
					<h:commandLink action="#{accountdata.toggleShowAllRows}" value="Show all orders" />
				</div>
				<div style="overflow-x:auto;">
					<h:dataTable id="orders2" rows="${accountdata.numberOfOrderRows}" value="#{accountdata.allOrders}" var="item" styleClass="table"
						headerClass="tableHeader" rowClasses="tableOddRow,tableEvenRow"
						columnClasses="tableColumn,tableColumn,tableColumn,tableColumn,tableColumn,tableColumn,tableColumn,tableColumn,tableColumn,tableColumn">

						<h:column>
							<f:facet name="header"><h:outputText value="Order ID" /></f:facet>
							<h:outputText value="#{item.orderID}" />
						</h:column>
						<h:column>
							<f:facet name="header"><h:outputText value="Status" /></f:facet>
							<h:outputText value="#{item.orderStatus}" />
						</h:column>
						<h:column>
							<f:facet name="header"><h:outputText value="Opened" /></f:facet>
							<h:outputText value="#{item.openDate}" />
						</h:column>
						<h:column>
							<f:facet name="header"><h:outputText value="Completed" /></f:facet>
							<h:outputText value="#{item.completionDate}" />
						</h:column>
						<h:column>
							<f:facet name="header"><h:outputText value="Fee" /></f:facet>
							<h:outputText value="#{item.orderFee}" />
						</h:column>
						<h:column>
							<f:facet name="header"><h:outputText value="Type" /></f:facet>
							<h:outputText value="#{item.orderType}" />
						</h:column>
						<h:column>
							<f:facet name="header"><h:outputText value="Symbol" /></f:facet>
							<h:outputText value="#{item.symbol}" />
						</h:column>
						<h:column>
							<f:facet name="header"><h:outputText value="Quantity" /></f:facet>
							<h:outputText value="#{item.quantity}" />
						</h:column>
						<h:column>
							<f:facet name="header"><h:outputText value="Price" /></f:facet>
							<h:outputText value="#{item.price}" />
						</h:column>
						<h:column>
							<f:facet name="header"><h:outputText value="Total" /></f:facet>
							<h:outputText value="#{item.total}" />
						</h:column>
					</h:dataTable>
				</div>
			</div>

			<div class="dt-card">
				<div class="dt-card-header">
					<h3>Account Profile</h3>
				</div>
				<div class="dt-form-row">
					<label>User ID:</label>
					<h:inputText id="uid" value="#{tradeapp.userID}" required="true" />
				</div>
				<div class="dt-form-row">
					<label>Full Name:</label>
					<h:inputText id="fullname" value="#{tradeapp.fullname}" readonly="true" />
				</div>
				<div class="dt-form-row">
					<label>Password:</label>
					<h:inputSecret redisplay="true" id="password" value="#{tradeapp.password}" required="true">
						<f:validateLength minimum="1" maximum="12" />
					</h:inputSecret>
				</div>
				<div class="dt-form-row">
					<label>Confirm Password:</label>
					<h:inputText id="cpassword" value="#{tradeapp.cpassword}" required="true" />
				</div>
				<div class="dt-form-row">
					<label>Address:</label>
					<h:inputText id="address" value="#{tradeapp.address}" readonly="true" />
				</div>
				<div class="dt-form-row">
					<label>Email:</label>
					<h:inputText id="email" value="#{tradeapp.email}" required="true" />
				</div>
				<div class="dt-form-row">
					<label>Credit Card:</label>
					<h:inputText id="ccn" value="#{tradeapp.ccn}" required="true">
						<f:validateLength minimum="1" maximum="30" />
					</h:inputText>
				</div>
				<div style="text-align:right;margin-top:1rem;">
					<h:commandButton class="dt-btn" id="submit" type="submit" value="Update Profile" action="#{tradeapp.updateProfile}" />
				</div>
			</div>

			<div class="dt-card">
				<div style="display:flex;justify-content:space-between;align-items:center;">
					<span class="text-muted">Click any <a href="docs/glossary.html">symbol</a> for a quote or to trade.</span>
					<div style="display:flex;gap:0.5rem;align-items:center;">
						<h:inputText id="symbols" value="#{quotedata.symbols}" required="true">
							<f:validateLength minimum="1" maximum="40" />
						</h:inputText>
						<h:commandButton class="dt-btn dt-btn-sm" id="submit2" type="submit" value="quotes" action="#{quotedata.getQuotesBySymbols}" />
					</div>
				</div>
			</div>
		</main>

		<footer class="dt-footer">
			Apache DayTrader Performance Benchmark Sample
		</footer>
	</h:form>

</h:body>
</html>
